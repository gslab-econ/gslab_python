running pytest
Searching for pytest
Best match: pytest 3.0.6
Processing pytest-3.0.6-py2.7.egg

Using /Users/mrsull/Desktop/gslab_python/.eggs/pytest-3.0.6-py2.7.egg
running egg_info
writing requirements to GSLab_Tools.egg-info/requires.txt
writing GSLab_Tools.egg-info/PKG-INFO
writing top-level names to GSLab_Tools.egg-info/top_level.txt
writing dependency_links to GSLab_Tools.egg-info/dependency_links.txt
reading manifest file 'GSLab_Tools.egg-info/SOURCES.txt'
writing manifest file 'GSLab_Tools.egg-info/SOURCES.txt'
running build_ext
============================= test session starts ==============================
platform darwin -- Python 2.7.12, pytest-3.0.6, py-1.4.31, pluggy-0.4.0
rootdir: /Users/mrsull/Desktop/gslab_python, inifile: 
collected 107 items

gencat/tests/test_checkDicts.py ...
gencat/tests/test_cleanDir.py ......
gencat/tests/test_main.py .
gencat/tests/test_unzipFiles.py ......
gencat/tests/test_writeDict.py ....
gencat/tests/test_zipFile.py ....
gslab_fill/tests/test_tablefill.py ....
gslab_fill/tests/test_textfill.py ........
gslab_scons/tests/test_build_lyx.py ......
gslab_scons/tests/test_build_matlab.py .....
gslab_scons/tests/test_build_python.py ......
gslab_scons/tests/test_build_r.py ......
gslab_scons/tests/test_build_stata.py ..........
gslab_scons/tests/test_build_tables.py ....
gslab_scons/tests/test_log.py ........
gslab_scons/tests/test_misc.py .................
gslab_scons/tests/test_release_function.py .F..
gslab_scons/tests/test_release_tools.py .....

=================================== FAILURES ===================================
____________________ TestReleaseFunction.test_release_nozip ____________________

self = <gslab_scons.tests.test_release_function.TestReleaseFunction testMethod=test_release_nozip>
mock_move = <MagicMock name='move' id='4397405200'>
mock_make_archive = <MagicMock name='make_archive' id='4397418576'>
mock_copy = <MagicMock name='copy' id='4397620176'>
mock_makedirs = <MagicMock name='makedirs' id='4397625168'>
mock_getpass = <MagicMock name='getpass' id='4397484496'>
mock_session = <MagicMock name='session' id='4397495952'>
mock_upload = <MagicMock name='upload_asset' id='4397565584'>
mock_rmtree = <MagicMock name='rmtree' id='4397477264'>

    @patch_collection
    def test_release_nozip(self,
                           mock_move,
                           mock_make_archive,
                           mock_copy,
                           mock_makedirs,
                           mock_getpass,
                           mock_session,
                           mock_upload,
                           mock_rmtree):
        '''
            Test that release() correctly prepares a release
            that uploads unzipped files to Google Drive.
            '''
        # Mock functions called by release() to simulate an actual call
        mock_getpass.return_value = 'test_token'
        args = copy.deepcopy(standard_args)
    
        release_data = helpers.mock_release_data(args)
        mock_session.return_value.get.return_value.content = release_data
    
        args['zip_release'] = False
        self.check_release(args, mock_session, mock_upload, mock_copy,
>                          mock_make_archive, mock_move)

test_release_function.py:184: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
test_release_function.py:133: in check_release
    'release_content/%s' % filename)
/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/mock/mock.py:999: in assert_any_call
    ), cause)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

value = AssertionError("copy('paper.pdf', 'release_content/paper.pdf') call not found",)
from_value = None

    def raise_from(value, from_value):
>       raise value
E       AssertionError: copy('paper.pdf', 'release_content/paper.pdf') call not found

/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/six.py:718: AssertionError
==================== 1 failed, 106 passed in 42.72 seconds =====================
Name                                   Stmts   Miss Branch BrPart  Cover   Missing
----------------------------------------------------------------------------------
gslab_scons/__init__.py                    9      0      0      0   100%
gslab_scons/_exception_classes.py         12      0      0      0   100%
gslab_scons/_release_tools.py            135      4     52      6    95%   89, 113, 261-262, 88->89, 95->97, 112->113, 181->188, 210->225, 260->261
gslab_scons/builders/__init__.py           0      0      0      0   100%
gslab_scons/builders/build_lyx.py         20      0      0      0   100%
gslab_scons/builders/build_matlab.py      30      0      4      0   100%
gslab_scons/builders/build_python.py      17      0      0      0   100%
gslab_scons/builders/build_r.py           19      0      2      0   100%
gslab_scons/builders/build_stata.py       50      0     20      0   100%
gslab_scons/builders/build_tables.py       8      0      0      0   100%
gslab_scons/log.py                        20      0      4      0   100%
gslab_scons/misc.py                      103      0     24      0   100%
gslab_scons/release.py                    59     59     32      0     0%   1-100
----------------------------------------------------------------------------------
TOTAL                                    482     63    138      6    84%
